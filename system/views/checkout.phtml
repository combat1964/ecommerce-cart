<?php
$this->jQuery()->addJavascriptFile($this->websiteUrl.'plugins/shopping/web/js/libs/jquery/addresschain.jquery.js');
?>

<div id="checkout-widget">
    <?php if(!Tools_Security_Acl::isAllowed(Shopping::RESOURCE_CART)): ?>
        <p class="checkout-button">
            <a title="<?php echo $this->translate('Checkout'); ?>" class="checkout" id="checkout-action"><?php echo $this->translate('Checkout'); ?></a>
            <span class="disc">OR</span>
            <a href="javascript:history.back();" title="<?php echo $this->translate('Keep shopping'); ?>"><?php echo $this->translate('Keep shopping'); ?></a>
        </p>
    <?php endif; ?>
    <?php if ($this->form !== null) : ?>
        <div id="checkoutflow" <?php echo (!Tools_Security_Acl::isAllowed(Shopping::RESOURCE_CART)) ? 'style="display:none;"' : ''; ?>>
            <h3 class="shipping-address-header">{$header:shippingAddress}</h3>
            <?php echo $this->form; ?>
        </div>
    <?php endif; ?>
</div>

<script data-main="<?php echo $this->websiteUrl;?>plugins/cart/web/js/modules/checkout/main.js" src="<?php echo $this->websiteUrl;?>plugins/shopping/web/js/libs/require.min.js"></script>

<style type="text/css">
	.required::after {
		content: ' *';
		color: red;
		font-weight: bold;
	}
	.notvalid {
		color: red;
	}
	#checkout-widget ul.shipping-methods li {
		list-style: none;
		padding: 5px 10px;
		margin: 0;
	}
	#checkout-widget ul.shipping-methods li label {
		cursor: pointer;
	}
	#checkout-widget ul.shipping-methods li label input[type="radio"] {
		vertical-align: middle;
		margin: 2px 4px;
	}
</style>