<?php
$this->jQuery()->addJavascriptFile($this->websiteUrl.'plugins/shopping/web/js/libs/jquery/addresschain.jquery.js');
?>

<div id="checkout-widget">

    <!-- if guest then show the "Checkout or Continue shopping" buttons -->
    <?php if(!$this->cartAllowed || Tools_Security_Acl::isAllowed(Tools_Security_Acl::RESOURCE_PLUGINS)): ?>
        <p class="checkout-button">
            <a title="<?php echo $this->translate('Checkout'); ?>" class="checkout" id="checkout-action"><?php echo $this->translate('Checkout'); ?></a>
            <span class="disc">OR</span>
            <a href="javascript:history.back();" title="<?php echo $this->translate('Keep shopping'); ?>"><?php echo $this->translate('Keep shopping'); ?></a>
        </p>
    <?php endif; ?>

    <div class="checkout-forms" <?php echo (!$this->cartAllowed) ? 'style="display:none"' : ''; ?>>
        <div class="checkout-box">
            <h2 class="shipping-address-header">{$header:<?php echo strtolower(get_class($this->form)); ?>}</h2>
            <?php echo $this->form; ?>
        </div>
        <?php if(!$this->cartAllowed || Tools_Security_Acl::isAllowed(Tools_Security_Acl::RESOURCE_PLUGINS)): ?>
            <div class="checkout-box">
                <h2>{$header:checkout-signin}</h2>
                {$member:login}
            </div>
        <?php endif; ?>
    </div>
</div>

<script data-main="<?php echo $this->websiteUrl;?>plugins/cart/web/js/modules/checkout/main.js" src="<?php echo $this->websiteUrl;?>plugins/shopping/web/js/libs/require.min.js"></script>

<style type="text/css">
	.required::after {
		content: ' *';
		color: red;
		font-weight: bold;
	}
	.notvalid {
		color: red;
	}
	#checkout-widget ul.shipping-methods li {
		list-style: none;
		padding: 5px 10px;
		margin: 0;
	}
	#checkout-widget ul.shipping-methods li label {
		cursor: pointer;
	}
	#checkout-widget ul.shipping-methods li label input[type="radio"] {
		vertical-align: middle;
		margin: 2px 4px;
	}
</style>